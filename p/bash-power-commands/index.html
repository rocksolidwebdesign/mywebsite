<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Powerful commands for Bash and Zsh'><title>Bash Power Commands</title>

<link rel='canonical' href='http://www.rocksolidwebdesign.com/p/bash-power-commands/'>

<link rel="stylesheet" href="/scss/style.min.ac77dcf8b111b51da39a92990f431923f210f3876d85798a2125667f96dc33a4.css">
<link rel="stylesheet" href="/css/mystyles.css">
<meta property='og:title' content='Bash Power Commands'>
<meta property='og:description' content='Powerful commands for Bash and Zsh'>
<meta property='og:url' content='http://www.rocksolidwebdesign.com/p/bash-power-commands/'>
<meta property='og:site_name' content='Devkeen'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='bash' /><meta property='article:tag' content='linux' /><meta property='article:tag' content='devops' /><meta property='article:tag' content='sysadmin' /><meta property='article:tag' content='tutorial' /><meta property='article:published_time' content='2010-06-16T18:00:00&#43;00:00'/><meta property='article:modified_time' content='2010-06-16T18:00:00&#43;00:00'/><meta property='og:image' content='http://www.rocksolidwebdesign.com/images/unsplash/markus-spiske-iar-afB0QQw-unsplash-crop.png' />
<meta name="twitter:title" content="Bash Power Commands">
<meta name="twitter:description" content="Powerful commands for Bash and Zsh"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://www.rocksolidwebdesign.com/images/unsplash/markus-spiske-iar-afB0QQw-unsplash-crop.png' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "light");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu49faf65d61a4fc91c950185441566e81_162460_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Devkeen</a></h1>
            <h2 class="site-description">Software Engineering</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/rocksolidwebdesign'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.linkedin.com/in/rocksolidwebdesign'
                        target="_blank"
                        title="LinkedIn"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li  class='current' >
            <a href='/post/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                
                <span>Blog</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/bash-power-commands/">
                
                    <img src="/images/unsplash/markus-spiske-iar-afB0QQw-unsplash-crop.png" loading="lazy" alt="Featured image of post Bash Power Commands" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/bash-power-commands/">Bash Power Commands</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Powerful commands for Bash and Zsh
        </h3>
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 16, 2010</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    15 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>There is a lot of power on the command line, but it can be difficult to master. I hope to give you a taste of that power with a survey of cool things you can do with the <code>find</code> utility on most unix like systems.</p>
<h2 id="bash-power-commands-for-mere-mortals">Bash Power Commands for Mere Mortals</h2>
<p>When you provide the <code>-exec</code> switch to find you can process multiple files at once, in any way you like: resize images, rename mp3s, add entire directory trees to your workgroup. You name it and <code>find -exec</code> can do it - well, name something you can do with bash :)</p>
<h3 id="actually-finding-stuff">Actually Finding Stuff</h3>
<p><em>NOTE: If you already know the basics of the common linux command line <code>find</code> utility, you can skip to the next section.</em></p>
<p>Find, simply put, finds files. If you ever forgot where you put your 1994 tax return, you could use find to find it. Like most commands in bash, all of it’s options are layed out for you in the manual page (see <code>man find</code>). Also like most commands in bash, the options are quite arcane and so plentiful that the uninitiated are left rather bewildered. Let me help sort that out for you.</p>
<p>First off, you&rsquo;ll need to remember that the first thing you must tell find is where to begin looking. If you don&rsquo;t tell it where to begin the search, how can you ever expect to find anything in an efficient manner? So, very simply, you could use <code>find</code> as a sort of alternate form of <code>ls</code> like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Music/jazz
</span></span></code></pre></td></tr></table>
</div>
</div><p>And find will dutifully list out all the files in folders it can get its paws on. This is the absolute most basic of basic ways to use find.</p>
<h3 id="by-name">By Name</h3>
<p>Lets try something a little more useful. Next up, we have the <code>-name</code> switch which will allow us to use glob patterns to search for files. You&rsquo;re probably familiar with glob patterns from DOS and Bash already, things like <code>ls *.jpg</code> to list all jpeg files. Well, lets see what the equivalent to that looks like with find.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Music/jazz -name &#34;*.mp3&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>This will only list out files that end with <code>.mp3</code>. If you have other file types then you might want to try one of these:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Music/jazz -name &#34;*.aac&#34;
</span></span><span class="line"><span class="cl">find /home/john/Music/jazz -name &#34;*.flac&#34;
</span></span><span class="line"><span class="cl">find /home/john/Music/jazz -name &#34;*.wav&#34;
</span></span><span class="line"><span class="cl">find /home/john/Music/jazz -name &#34;*.ogg&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="by-regular-expression">By Regular Expression</h3>
<p>As you can see the possibilities for file name matching are only limited by your imagination - well, your imagination and the limits of glob patterns. I personally find glob patterns to be rather limiting, and some people forget that glob patterns are not regular expressions because they look so similar. Lucky for us find lets us use regular expressions as well. We can do the exact same searches as above, but with the <code>-regex</code> switch instead of the <code>-name</code> switch, like so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Music/jazz -regex &#34;.*\.aac&#34;
</span></span><span class="line"><span class="cl">find /home/john/Music/jazz -regex &#34;.*\.flac&#34;
</span></span><span class="line"><span class="cl">find /home/john/Music/jazz -regex &#34;.*\.wav&#34;
</span></span><span class="line"><span class="cl">find /home/john/Music/jazz -regex &#34;.*\.ogg&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="being-insensitive">Being Insensitive</h3>
<p>Ok that&rsquo;s nice, but seriously, I can&rsquo;t remember the file name, so a case sensitive match doesn&rsquo;t work for me! No problem, just use the case insensitive version <code>-iname</code>. So if you wanted to find that 1994 tax return and you had some vague idea of what it was probably named, you might try something like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Accounting -iname &#34;*tAxES*1994*&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>and <code>-iregex</code> works about the same way</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Accounting -iregex &#34;.*\(tax\|taxes\|return\|1994\).*\(tax\|taxes\|return\|1994\).*&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>This regex should find examples such as &ldquo;1994 - State Tax Return.doc&rdquo; or &ldquo;l33t hax0R taXeS from 1994.pdf&rdquo;</p>
<h2 id="doing-stuff-with-what-you-find">Doing Stuff With What You Find</h2>
<p>First off, think of <code>find</code> as a tool for not for &ldquo;finding&rdquo; but for &ldquo;choosing&rdquo; what you want to work on. The power of the find command becomes more obvious when we start being able to apply commands to each file. This means we can do things in batches, like we could rename a bunch of files from <code>.txt</code> to <code>.doc</code> or we could use imagemagick to resize a bunch of pictures for example.</p>
<h3 id="a-case-scenario">A Case Scenario</h3>
<p>Lets say we have some mp3s of Bobby McFerrin&rsquo;s album &ldquo;Don&rsquo;t Worry Be Happy&rdquo; and we want to add his name to the beginning of each mp3 file so that we&rsquo;re more organized. If you do this through a GUI you&rsquo;re going to be sitting there for a long time typing the same thing over and over again, clicking waiting, typing, over and over. If you do this with the shell, you will merely have to think for a small moment to write the proper command, and then everything is done for you. If you don&rsquo;t like the result, it&rsquo;s just as easy to change things back to the way they were, you can either run the reverse command, or you can just delete the copy you were working on. You, um, <em>were</em> working on a copy&hellip; right? :P</p>
<p>I&rsquo;m going to pretend that I have a folder named &ldquo;Don&rsquo;t Worry Be Happy&rdquo; and that in it, I have several mp3 files from Bobby McFerrin. In my case I just have some example files named <code>foo.mp3</code> and <code>bar.mp3</code> etc.. Now the first thing to do, is to get find to find the right files. Lets write an example find command and check its output to be sure that we&rsquo;ll be operating on exactly the files we want to change. I will run something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /home/john/Music/jazz
</span></span><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>That seems reasonable right? I think so too, lets look at the output</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Don&#39;t Worry Be Happy/
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/foo.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/qux.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/bar.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/baz.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="trimming-unwanted-folders">Trimming Unwanted Folders</h3>
<p>Uh oh, look at that, the find command is including the actual folder in the list of files it found! We don&rsquo;t want to change the folder name, so lets update this command to only find files.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f
</span></span></code></pre></td></tr></table>
</div>
</div><p>And now we get</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Don&#39;t Worry Be Happy/foo.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/qux.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/bar.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/baz.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><p>That&rsquo;s much better. Of course, we could have also used a glob pattern with <code>-name</code> or a regular expression, but I wanted to illustrate another handy feature of the find command, which is that you can tell it to only select files or only select directories, this can be handy for normalizing permissions as you&rsquo;ll see later.</p>
<h3 id="running-some-test-commands">Running Some Test Commands</h3>
<p>Now lets start getting something done with these files. Before we do anything real we&rsquo;ll run a test command just so we can double check that our command is running the way we want it to.</p>
<p>To run a command on each file found, we use the <code>-exec</code> switch.</p>
<p>NOTE: There is a small quirk about the <code>-exec</code> switch: you must tell <code>-exec</code> where the command ends. Most languages do this with a semi-colon <code>;</code> but bash will gobble up your semi-colon before giving it to <code>-exec</code> because bash is greedy and bash thinks that you mean you want to run some other command after running find. To prevent bash from swallowing our semi-colon, we need to escape it with the backslash like this <code>\;</code> and then the semi-colon will be given to <code>-exec</code> and everyone is happy.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec echo &#34;The file is: {}&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>and we get</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">The file is: Don&#39;t Worry Be Happy/foo.mp3
</span></span><span class="line"><span class="cl">The file is: Don&#39;t Worry Be Happy/qux.mp3
</span></span><span class="line"><span class="cl">The file is: Don&#39;t Worry Be Happy/bar.mp3
</span></span><span class="line"><span class="cl">The file is: Don&#39;t Worry Be Happy/baz.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see, still not much is happening yet, but we are getting there. The main thing to notice is that <code>{}</code> is the placeholder for the current file name. It means &ldquo;put the current file name right here as if I had just typed it out&rdquo;. Lets do something a little more meaningful next, lets actually put Bobby McFerrin&rsquo;s name in front of each file.</p>
<h3 id="changing-the-file-name">Changing The File Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec echo &#34;{}&#34; | sed -e &#34;s#^#Bobby McFerrin - #&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>NOTE: most people usually use forward slashes with sed for substitution, but I prefer to use <code>#</code> by default because then you don&rsquo;t need to escape your slashes. This is especially useful when dealing with file names.</p>
<p>Uh, oh what&rsquo;s this?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find: missing argument to `-exec&#39;
</span></span><span class="line"><span class="cl">sed: can&#39;t read ;: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="running-multiple-commands">Running Multiple Commands</h3>
<p>Well, yes we do need to escape the semi-colon because of bash, but once we start getting a little more complicated, things break down again. The basic solution is to feed the entire string of commands to bash directly. Bash can be invoked with the <code>-c</code> switch which does much the same thing as <code>-exec</code>, namely it runs a command (&ldquo;c&rdquo; for &ldquo;command&rdquo;, get it?).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec bash -c &#39;echo $1 | sed -e &#34;s#^#Bobby McFerrin - #&#34;&#39; _ &#34;{}&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Doing this is certainly not as pretty, and instead of using <code>{}</code> in our list of commands, we use bash as we would if we were writing a script, in other words we pull our current file name from the first argument provided to bash which is always stored in the <code>$1</code> variable. We then provide <code>{}</code> as the first argument to bash (the <code>_</code> takes the place of the script filename since there isn&rsquo;t one). Notice that the entire script is now wrapped in single quotes, we do this so that <code>-exec</code> knows what to feed <code>bash -c</code> as the command and what to feed as the arguments.</p>
<p>Ok so what does that command give us?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Bobby McFerrin - Don&#39;t Worry Be Happy/foo.mp3
</span></span><span class="line"><span class="cl">Bobby McFerrin - Don&#39;t Worry Be Happy/qux.mp3
</span></span><span class="line"><span class="cl">Bobby McFerrin - Don&#39;t Worry Be Happy/bar.mp3
</span></span><span class="line"><span class="cl">Bobby McFerrin - Don&#39;t Worry Be Happy/baz.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hmm, not quite what we wanted. If we had wanted to rename the entire directory we could have done that, no problem and that would have only taken a single command. The filename in this case is the entire file path, starting with the directory name, so simply using <code>^</code> in the regular expression to replace the beginning of the file name is not going to work, we&rsquo;ll need to be more specific. Luckily, this is a very simple and easy change because I&rsquo;m already using <code>#</code> signs for the substitution so no escaping is needed, just change the <code>^</code> caret to a <code>/</code> forward slash.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec bash -c &#39;echo $1 | sed -e &#34;s#/#/Bobby McFerrin - #&#34;&#39; _ &#34;{}&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now this command gets is the following output</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Don&#39;t Worry Be Happy/Bobby McFerrin - foo.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/Bobby McFerrin - qux.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/Bobby McFerrin - bar.mp3
</span></span><span class="line"><span class="cl">Don&#39;t Worry Be Happy/Bobby McFerrin - baz.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><p>Awesome, much better, now to write up a full command to actually rename these files.</p>
<h3 id="testing-the-real-thing">Testing The Real Thing</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec bash -c &#39;echo &#34;mv&#34; &#34;$1&#34; &#34;$(echo &#34;$1&#34; | sed -e &#34;s#/#/Bobby McFerrin - #&#34;)&#34;&#39; _ &#34;{}&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>And that gives us</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mv Don&#39;t Worry Be Happy/foo.mp3 Don&#39;t Worry Be Happy/Bobby McFerrin - foo.mp3
</span></span><span class="line"><span class="cl">mv Don&#39;t Worry Be Happy/qux.mp3 Don&#39;t Worry Be Happy/Bobby McFerrin - qux.mp3
</span></span><span class="line"><span class="cl">mv Don&#39;t Worry Be Happy/bar.mp3 Don&#39;t Worry Be Happy/Bobby McFerrin - bar.mp3
</span></span><span class="line"><span class="cl">mv Don&#39;t Worry Be Happy/baz.mp3 Don&#39;t Worry Be Happy/Bobby McFerrin - baz.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="refactoring">Refactoring</h3>
<p>Lets refactor just a touch, so our script is more friendly and easier to work with. Using single quotes to feed the command to bash means that whatever we put between those single quotes may span as many lines as we wish. Also we&rsquo;re getting happy with the quotes. Bash likes quotes, always quote more, not less, especially when you&rsquo;re dealing with files that have spaces in their names.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec bash -c &#39;
</span></span><span class="line"><span class="cl">    orig_name=&#34;$1&#34;
</span></span><span class="line"><span class="cl">    new_name=&#34;$(echo &#34;$1&#34; | sed -e &#34;s#/#/Bobby McFerrin - #&#34;)&#34;
</span></span><span class="line"><span class="cl">    echo moving \&#34;&#34;$orig_name&#34;\&#34; to \&#34;&#34;$new_name&#34;\&#34;
</span></span><span class="line"><span class="cl">&#39; _ &#34;{}&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>now we get</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/foo.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - foo.mp3&#34;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/qux.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - qux.mp3&#34;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/bar.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - bar.mp3&#34;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/baz.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - baz.mp3&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="renaming-for-real">Renaming For Real</h3>
<p>Cool, lets try this thing without a safety net, go ahead and add in the move command - don&rsquo;t forget your quotes. We&rsquo;ll also put in an <code>ls</code> before and after, so we can double check our results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ls &#34;Don&#39;t Worry Be Happy&#34;
</span></span><span class="line"><span class="cl">find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec bash -c &#39;
</span></span><span class="line"><span class="cl">    orig_name=&#34;$1&#34;
</span></span><span class="line"><span class="cl">    new_name=&#34;$(echo &#34;$1&#34; | sed -e &#34;s#/#/Bobby McFerrin - #&#34;)&#34;
</span></span><span class="line"><span class="cl">    echo moving \&#34;&#34;$orig_name&#34;\&#34; to \&#34;&#34;$new_name&#34;\&#34;
</span></span><span class="line"><span class="cl">    mv &#34;$orig_name&#34; &#34;$new_name&#34;
</span></span><span class="line"><span class="cl">&#39; _ &#34;{}&#34; \;
</span></span><span class="line"><span class="cl">ls &#34;Don&#39;t Worry Be Happy&#34;
</span></span><span class="line"><span class="cl">echo &#34;DONE&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>And that gives us</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">john@localhost ~/Music/jazz$ ls &#34;Don&#39;t Worry Be Happy&#34;
</span></span><span class="line"><span class="cl">bar.mp3  baz.mp3  foo.mp3  qux.mp3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">john@localhost ~/Music/jazz$ find &#34;Don&#39;t Worry Be Happy&#34; -type f -exec bash -c &#39;
</span></span><span class="line"><span class="cl">&gt;     orig_name=&#34;$1&#34;
</span></span><span class="line"><span class="cl">&gt;     new_name=&#34;$(echo &#34;$1&#34; | sed -e &#34;s#/#/Bobby McFerrin - #&#34;)&#34;
</span></span><span class="line"><span class="cl">&gt;     echo moving \&#34;&#34;$orig_name&#34;\&#34; to \&#34;&#34;$new_name&#34;\&#34;
</span></span><span class="line"><span class="cl">&gt;     mv &#34;$orig_name&#34; &#34;$new_name&#34;
</span></span><span class="line"><span class="cl">&gt; &#39; _ &#34;{}&#34; \;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/foo.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - foo.mp3&#34;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/qux.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - qux.mp3&#34;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/bar.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - bar.mp3&#34;
</span></span><span class="line"><span class="cl">moving &#34;Don&#39;t Worry Be Happy/baz.mp3&#34; to &#34;Don&#39;t Worry Be Happy/Bobby McFerrin - baz.mp3&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">john@localhost ~/Music/jazz$ ls &#34;Don&#39;t Worry Be Happy&#34;
</span></span><span class="line"><span class="cl">Bobby McFerrin - bar.mp3  Bobby McFerrin - baz.mp3  Bobby McFerrin - foo.mp3  Bobby McFerrin - qux.mp3
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="a-better-alternative">A Better Alternative</h3>
<p>Awesome! Er&hellip; kind of&hellip; so you mean I have to type out all that gook every time I want to rename some files? Luckily, no. There is a perl utility called, oddly enough, <a class="link" href="http://search.cpan.org/~rmbarker/File-Rename-0.05/"  target="_blank" rel="noopener"
    >rename</a> and it makes renaming files like this a breeze. If you&rsquo;re on Ubuntu, then you&rsquo;ve already got <code>rename</code>, it lives in <code>/usr/bin/rename</code> and it comes from the <code>util-linux</code> package. Otherwise you&rsquo;ll need to build it yourself or download one of the many prebuilt versions you can find on the net.</p>
<h2 id="command-glue">Command Glue</h2>
<p>There is a small and important distinction and option that you have with <code>-exec</code> and that is whether to run separate commands or one big long command. If you use the semi colon with exec, a separate command will be run for each file. If you use the plus sign, one big command will be run with all the files being provided on one line to the command.</p>
<h3 id="separate">Separate</h3>
<p>For example if you wanted to delete some files, you could do something like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /some/folder -name &#34;*.txt&#34; -exec rm -rf &#34;{}&#34; \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>and if there were three files, foo, bar and baz, then behind the scenes it would look something like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">rm -rf foo.txt
</span></span><span class="line"><span class="cl">rm -rf bar.txt
</span></span><span class="line"><span class="cl">rm -rf baz.txt
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="together">Together</h3>
<p>If, however, you use a plus sign instead of the semi-colon (and you don&rsquo;t need to escape the plus sign by the way)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /some/folder -name &#34;*.txt&#34; -exec rm -rf &#34;{}&#34; +
</span></span></code></pre></td></tr></table>
</div>
</div><p>then find will put the list of files all on one line and run only a single command, so behind the scenes it would look something like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">rm -rf foo.txt bar.txt baz.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>This only works if your list of files is the last argument, you can&rsquo;t use this with the move command for example because</p>
<h2 id="dont-do-this-this-is-bad-mmmmkay">don&rsquo;t do this, this is bad mmmmkay?</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /some/folder -name &#34;*.txt&#34; -exec mv &#34;{}&#34; /some/other/folder +
</span></span></code></pre></td></tr></table>
</div>
</div><p>just isn&rsquo;t correct. So if you want to use <code>+</code> then <code>{}</code> must be the last argument to your command.</p>
<p>The main consideration here is that if you have a lot of files, it will probably be faster to run the command once, giving it all the file names, than it will be to run the command on every file individually.</p>
<h2 id="some-common-useful-stuff">Some Common Useful Stuff</h2>
<p>So renaming was kind of pointless, except to learn the glorious nirvana of find, now what more can we ask for?</p>
<h3 id="normalize-file-and-folder-permissions">Normalize file and folder permissions.</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /some/folder -type f -exec chmod 644 &#34;{}&#34; +
</span></span><span class="line"><span class="cl">find /some/folder -type d -exec chmod 755 &#34;{}&#34; +
</span></span></code></pre></td></tr></table>
</div>
</div><p>Sometimes permissions get all wacky and if you want to set them back to relatively sane defaults you could use something like this.</p>
<h3 id="giving-ownership-to-your-team">Giving Ownership to Your Team.</h3>
<p>If you wanted to for example add a folder to your workgroup so that all members have and will continue to have access to the files in it, you may wish to set the sticky bit.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">chmod -R g+w /some/folder
</span></span><span class="line"><span class="cl">find /some/folder -type d -exec chmod g+s &#34;{}&#34; +
</span></span></code></pre></td></tr></table>
</div>
</div><p>The sticky bit is only relevant for folders, so we use the find command to specify only folders with <code>-type d</code>. Granting write permissions is easily done with <code>chmod</code> by itself using the <code>-R</code> switch meaning recursive.</p>
<h3 id="resize-a-bunch-of-jpegs">Resize a bunch of JPEGs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /home/john/Pictures/Summer/Vacation -iname &#34;*.jpg&#34; -exec mogrify -resize 50% &#34;{}&#34; +
</span></span><span class="line"><span class="cl">find /home/john/Pictures/Summer/Vacation -iname &#34;*.jpg&#34; -exec mogrify -strip &#34;{}&#34; +
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can easily and quickly strip out identifying information like date, time or GPS coordinates from your pictures to protect your personal privacy with the <code>-strip</code> switch.</p>
<h3 id="swap-out-sets-of-vhosts">Swap out sets of vhosts</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">find /etc/apache2/sites-enabled -iname &#34;proxied_*&#34; -exec rm -rf &#34;{}&#34; +
</span></span><span class="line"><span class="cl">find /etc/apache2/sites-available -iname &#34;nonproxied_*&#34; -exec ln -s &#34;{}&#34; /etc/apache2/sites-enabled \;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Lets say you&rsquo;d like to be able to switch back and forth between Apache HTTPD as your main web server, and putting apache behind a reverse proxy with nginx while you learn about reverse proxies and nginx and get your configuration set up just the way you want it. If you make two sets of vhosts and have the names for each type begin with some unique identifier like &ldquo;proxied&rdquo; then you can easily use find to switch back and forth between the two different vhost configurations.</p>
<p>To switch between the proxied and non-proxied styles of apache all you need to do is delete the symlinks to the proxied vhosts and re-symlink the non-proxied vhosts. This is what the above example accomplishes.</p>
<p><strong>Cover Photo</strong></p>
<p>Credit: <a class="link" href="https://unsplash.com/@markusspiske?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"  target="_blank" rel="noopener"
    >Markus Spiske Iar</a></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/bash/">bash</a>
        
            <a href="/tags/linux/">linux</a>
        
            <a href="/tags/devops/">devops</a>
        
            <a href="/tags/sysadmin/">sysadmin</a>
        
            <a href="/tags/tutorial/">tutorial</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>The Unlicense <a class="link" href="https://unlicense.org"  target="_blank" rel="noopener"
    >https://unlicense.org</a></span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/cool-bash-prompt/">
        
        
            <div class="article-image">
                
                    <img src="/images/unsplash/ali-shah-lakhani-sp1BZ1atp7M-unsplash-crop.png" loading="lazy" data-key="cool-bash-prompt" data-hash="/images/unsplash/ali-shah-lakhani-sp1BZ1atp7M-unsplash-crop.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Cool Bash Prompt</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2022 Devkeen
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.13.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#bash-power-commands-for-mere-mortals">Bash Power Commands for Mere Mortals</a>
      <ol>
        <li><a href="#actually-finding-stuff">Actually Finding Stuff</a></li>
        <li><a href="#by-name">By Name</a></li>
        <li><a href="#by-regular-expression">By Regular Expression</a></li>
        <li><a href="#being-insensitive">Being Insensitive</a></li>
      </ol>
    </li>
    <li><a href="#doing-stuff-with-what-you-find">Doing Stuff With What You Find</a>
      <ol>
        <li><a href="#a-case-scenario">A Case Scenario</a></li>
        <li><a href="#trimming-unwanted-folders">Trimming Unwanted Folders</a></li>
        <li><a href="#running-some-test-commands">Running Some Test Commands</a></li>
        <li><a href="#changing-the-file-name">Changing The File Name</a></li>
        <li><a href="#running-multiple-commands">Running Multiple Commands</a></li>
        <li><a href="#testing-the-real-thing">Testing The Real Thing</a></li>
        <li><a href="#refactoring">Refactoring</a></li>
        <li><a href="#renaming-for-real">Renaming For Real</a></li>
        <li><a href="#a-better-alternative">A Better Alternative</a></li>
      </ol>
    </li>
    <li><a href="#command-glue">Command Glue</a>
      <ol>
        <li><a href="#separate">Separate</a></li>
        <li><a href="#together">Together</a></li>
      </ol>
    </li>
    <li><a href="#dont-do-this-this-is-bad-mmmmkay">don&rsquo;t do this, this is bad mmmmkay?</a></li>
    <li><a href="#some-common-useful-stuff">Some Common Useful Stuff</a>
      <ol>
        <li><a href="#normalize-file-and-folder-permissions">Normalize file and folder permissions.</a></li>
        <li><a href="#giving-ownership-to-your-team">Giving Ownership to Your Team.</a></li>
        <li><a href="#resize-a-bunch-of-jpegs">Resize a bunch of JPEGs</a></li>
        <li><a href="#swap-out-sets-of-vhosts">Swap out sets of vhosts</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
